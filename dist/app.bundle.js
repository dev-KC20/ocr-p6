(()=>{function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw o}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(i,s){var o=e.apply(t,r);function a(e){n(o,i,s,a,c,"next",e)}function c(e){n(o,i,s,a,c,"throw",e)}a(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new c(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function c(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return c=function(e){this.s=e,this.n=e.next},c.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new c(e)}var u=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.element=t,this.options=Object.assign({},{slidesToScroll:1,slidesVisible:1,loop:!1},r);var s=[].slice.call(t.children);this.isMobile=!1,this.currentItem=0,this.moveCallBacks=[],this.root=this.createDivWithClass("carousel"),this.container=this.createDivWithClass("carousel__container"),this.root.setAttribute("tabindex","0"),this.root.appendChild(this.container),this.element.appendChild(this.root),this.items=s.map((function(e){var t=n.createDivWithClass("carousel__item");return t.appendChild(e),n.container.appendChild(t),t})),this.setStyle(),this.createNavigation(),this.moveCallBacks.forEach((function(e){return e(0)})),this.onWindowResize(),window.addEventListener("resize",this.onWindowResize.bind(this)),this.root.addEventListener("keyup",(function(e){"ArrowRight"===e.key||"Right"===e.key?n.next():"ArrowLeft"!==e.key&&"Left"!==e.key||n.prev()}))}return o(e,[{key:"setStyle",value:function(){var e=this,t=this.items.length/this.slidesVisible;this.container.style.width=100*t+"%",this.items.forEach((function(n){return n.style.width=100/e.slidesVisible/t+"%"}))}},{key:"createNavigation",value:function(){var e=this,t=this.createDivWithClass("carousel__next"),n=this.createDivWithClass("carousel__prev");this.root.appendChild(t),this.root.appendChild(n),t.addEventListener("click",this.next.bind(this)),n.addEventListener("click",this.prev.bind(this)),!0!==this.options.loop&&this.onMove((function(r){0===r?n.classList.add("carousel__prev--hidden"):n.classList.remove("carousel__prev--hidden"),void 0===e.items[e.currentItem+e.slidesVisible]?t.classList.add("carousel__next--hidden"):t.classList.remove("carousel__next--hidden")}))}},{key:"next",value:function(){this.goToItem(this.currentItem+this.slidesToScroll)}},{key:"prev",value:function(){this.goToItem(this.currentItem-this.slidesToScroll)}},{key:"goToItem",value:function(e){if(e<0){if(!this.options.loop)return;e=this.items.length-this.slidesVisible}else if(e>=this.items.length||void 0===this.items[this.currentItem+this.slidesVisible]&&e>this.currentItem){if(!this.options.loop)return;e=0}var t=-100*e/this.items.length;this.container.style.transform="translate3d("+t+"%, 0, 0)",this.currentItem=e,this.moveCallBacks.forEach((function(t){return t(e)}))}},{key:"onMove",value:function(e){this.moveCallBacks.push(e)}},{key:"onWindowResize",value:function(){var e=this,t=window.innerWidth<800;t!==this.isMobile&&(this.isMobile=t,this.setStyle()),this.moveCallBacks.forEach((function(t){return t(e.currentItem)}))}},{key:"createDivWithClass",value:function(e){var t=document.createElement("div");return t.setAttribute("class",e),t}},{key:"slidesToScroll",get:function(){return this.isMobile?1:this.options.slidesToScroll}},{key:"slidesVisible",get:function(){return this.isMobile?1:this.options.slidesVisible}}]),e}(),l=function(){function e(t,n,r,s,o,a,c,u,l,d,h,p,f,m){i(this,e),this.id=t,this.url=n,this.image_url=r,this.title=s,this.genres=o,this.date_published=a,this.rated=c,this.imdb_score=u,this.directors=l,this.actors=d,this.duration=h,this.countries=p,this.description=f,this.worldwide_gross_income=m}var t;return o(e,[{key:"init",value:(t=r(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Fetch missed, pls check API server");case 5:return e.next=7,n.json();case 7:return r=e.sent,this.id=r.id,this.url=r.url,this.image_url=r.image_url,this.title=r.title,this.genres=r.genres,this.date_published=r.date_published,this.rated=r.rated,this.imdb_score=r.imdb_score,this.directors=r.directors,this.actors=r.actors,this.duration=r.duration,this.countries=r.countries,this.description=r.description,this.worldwide_gross_income=r.worldwide_gross_income,e.abrupt("return",this);case 23:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),d=o((function e(t,n,r,s,o,a){i(this,e),this.id=t,this.url=n,this.image_url=r,this.title=s,this.genres=o,this.imdb_score=a})),h=function(e){return(new l).init(e)},p=function(){var e=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(R);case 3:if(e.sent.ok){e.next=6;break}throw new Error("Fetch missed, pls check API server");case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Fetch missed, pls check API server");case 5:return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=r(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t[r].push(new d(n.id,n.url,n.image_url,n.title,n.genres,n.imdb_score));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(){var t=r(regeneratorRuntime.mark((function t(){var n,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e(L),t.prev=1,s=regeneratorRuntime.mark((function e(){var t,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.value,I[t]=[],n=R,t!=j&&(n+="&genre="+t),s=3;case 6:if(!(s>1&&null!=n)){e.next=12;break}return e.next=9,f(n).then(function(){var e=r(regeneratorRuntime.mark((function e(r){var i,s,o,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,s=!1,e.prev=2,c=a(r.results);case 4:return e.next=6,c.next();case 6:if(!(i=!(u=e.sent).done)){e.next=15;break}return movieCurrent=u.value,e.next=10,m(I,movieCurrent,t);case 10:e.sent;case 12:i=!1,e.next=4;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),s=!0,o=e.t0;case 21:if(e.prev=21,e.prev=22,!i||null==c.return){e.next=26;break}return e.next=26,c.return();case 26:if(e.prev=26,!s){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.next=33,r.next;case 33:n=e.sent;case 34:case"end":return e.stop()}}),e,null,[[2,17,21,31],[22,,26,30]])})));return function(t){return e.apply(this,arguments)}}());case 9:s--,e.next=6;break;case 12:case"end":return e.stop()}}),e)})),n.s();case 4:if((i=n.n()).done){t.next=8;break}return t.delegateYield(s(),"t0",6);case 6:t.next=4;break;case 8:t.next=13;break;case 10:t.prev=10,t.t1=t.catch(1),n.e(t.t1);case 13:return t.prev=13,n.f(),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})));return function(){return t.apply(this,arguments)}}(),y=function(){var e=r(regeneratorRuntime.mark((function e(t,n,r){var i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||((i=document.createElement("div")).setAttribute("class","carousel-child"),i.setAttribute("id",n.id),t.appendChild(i),(s=document.createElement("img")).src=n.image_url,s.setAttribute("id",n.id),s.setAttribute("class","js-modal"),i.appendChild(s)),e.next=3,x(P,n.id);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(e){e.preventDefault();var t=document.querySelector("#modal"+e.target.getAttribute("id"));t.style.display=null,(W=t).addEventListener("click",g),W.querySelector(".js-modal-close").addEventListener("click",g),W.querySelector(".js-modal-stop").addEventListener("click",w)},g=function e(t){null!==W&&(t.preventDefault(),W.style.display="none",W.removeEventListener("click",e),W.querySelector(".js-modal-close").removeEventListener("click",e),W.querySelector(".js-modal-stop").removeEventListener("click",w),W=null)},w=function(e){e.stopPropagation()};function k(e,t,n,r,i){if("content"==i){var s=document.createElement("p");s.textContent=n,t.appendChild(s);var o=document.createElement("a");o.textContent=r,t.appendChild(o)}if("image"==i){var a=document.createElement("img");a.alt=n,a.src=r,t.appendChild(a)}if("hidden"==i){var c=document.createElement("p");c.setAttribute("id",e),c.hidden=!0,t.appendChild(c)}}var x=function(){var e=r(regeneratorRuntime.mark((function e(t,n){var r,i,s,o,a,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(q+n);case 2:r=e.sent,(i=document.createElement("aside")).setAttribute("id","modal"+n),i.setAttribute("class","modal"),i.style.display="none",t.appendChild(i),(s=document.createElement("div")).setAttribute("class","modal-wrapper js-modal-stop"),i.appendChild(s),(o=document.createElement("div")).setAttribute("class","modal-header"),s.appendChild(o),k(n,o,"",r.title,"content"),(a=document.createElement("div")).setAttribute("class","modal-info"),s.appendChild(a),k(n,a,"Poster original:",r.image_url,"image"),k(n,a,"Genre: ",r.genres,"content"),k(n,a,"Date de sortie: ",r.date_published,"content"),k(n,a,"Score imdb: ",r.imdb_score,"content"),k(n,a,"Durée (min): ",r.duration,"content"),k(n,a,"Pays d'origine: ",r.countries,"content"),k(n,a,"Rated: ",r.rated,"content"),(c=document.createElement("div")).setAttribute("class","modal-details"),s.appendChild(c),k(n,c,"Réalisateur(.e.s): ",r.directors,"content"),k(n,c,"Acteur(.e.s):",r.actors,"content"),k(n,c,"Résumé: ",r.description,"content"),null!=r.worldwide_gross_income&&k(n,c,"Résultat Box office: "," $"+Number(r.worldwide_gross_income).toLocaleString("fr"),"content"),(u=document.createElement("button")).textContent="Fermer.",u.setAttribute("class","js-modal-close"),c.appendChild(u);case 36:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var t=r(regeneratorRuntime.mark((function t(){var n,r,i,s,o,a,c,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e(L);try{for(n.s();!(r=n.n()).done;){i=r.value,(s=document.createElement("div")).setAttribute("class","carousel-parent"),s.setAttribute("id",i),s.textContent=i,S.appendChild(s),o=document.querySelector("#"+i),a=e(I[i]);try{for(a.s();!(c=a.n()).done;)u=c.value,l=!1,u==I[j][0]&&(l=!0),y(o,u,l)}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(){var e=r(regeneratorRuntime.mark((function e(){var t,n,r,i,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D=I[j][0].id,(t=document.createElement("div")).setAttribute("class","hero-parent"),t.style.display="block",t.setAttribute("id",D),T.appendChild(t),(n=document.createElement("p")).textContent=I[j][0].title,t.appendChild(n),(r=document.createElement("img")).setAttribute("class","hero-child"),r.alt=I[j][0].title,r.src=I[j][0].image_url,r.setAttribute("id",D),t.appendChild(r),(i=document.createElement("button")).textContent="Plus d'information",i.setAttribute("class","hero-button"),i.setAttribute("id",D),t.appendChild(i),i.addEventListener("click",b),e.next=23,h(q+D);case 23:s=e.sent,(o=document.createElement("p")).setAttribute("class","hero-plot"),o.textContent=s.description,t.appendChild(o);case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(t){t.preventDefault(),T.style.display="none";var n,r=e(L.slice(4));try{for(r.s();!(n=r.n()).done;){var i=n.value;document.querySelector(".best-section #"+i+".carousel-parent").style.display=null}}catch(e){r.e(e)}finally{r.f()}},A=function(t){t.preventDefault(),T.style.display=null;var n,r=e(L.slice(4));try{for(r.s();!(n=r.n()).done;){var i=n.value;document.querySelector(".best-section #"+i+".carousel-parent").style.display="none"}}catch(e){r.e(e)}finally{r.f()}},S=document.querySelector(".best-section"),R="http://localhost:8000/api/v1/titles/?sort_by=-imdb_score",j="Best",L=[j,"Fantasy","Sci-Fi","Action","Thriller","Crime","Western"],I={},q="http://localhost:8000/api/v1/titles/",P=document.querySelector(".modal-section"),T=document.querySelector(".hero-section"),D="",W=null,V=document.querySelector(".box-loading"),M=document.querySelectorAll(".nav-categories"),B=document.querySelectorAll(".nav-home");p().then((function(t){t&&v().then((function(){_(),C().then(r(regeneratorRuntime.mark((function e(){var t,n,r,i,s,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,n=!1,e.prev=2,i=a(L);case 4:return e.next=6,i.next();case 6:if(!(t=!(s=e.sent).done)){e.next=13;break}o=s.value,c=document.querySelector(".best-section #"+o+".carousel-parent"),new u(c,{slidesToScroll:1,slidesVisible:4,loop:!1});case 10:t=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),n=!0,r=e.t0;case 19:if(e.prev=19,e.prev=20,!t||null==i.return){e.next=24;break}return e.next=24,i.return();case 24:if(e.prev=24,!n){e.next=27;break}throw r;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])}))))})).then((function(){var t,n=e(L.slice(4));try{for(n.s();!(t=n.n()).done;){var r=t.value;document.querySelector(".best-section #"+r+".carousel-parent").style.display="none"}}catch(e){n.e(e)}finally{n.f()}var i,s=e(document.querySelectorAll(".js-modal"));try{for(s.s();!(i=s.n()).done;)modalClick=i.value,modalClick.addEventListener("click",b)}catch(e){s.e(e)}finally{s.f()}var o,a=e(M);try{for(a.s();!(o=a.n()).done;)navcat=o.value,navcat.addEventListener("click",E,!1)}catch(e){a.e(e)}finally{a.f()}var c,u=e(B);try{for(u.s();!(c=u.n()).done;)navho=c.value,navho.addEventListener("click",A,!1)}catch(e){u.e(e)}finally{u.f()}V.parentNode.removeChild(V)}))})).catch((function(e){throw"The API server is not available, end of the App"}))})();